<section class=" shadow p-3 my-5 rounded-3 w-50 mx-auto">
    <h1 class="h2 text-main">Register now : </h1>
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <div class="my-3">
            <label for="name">Name : </label>
            <input [ngClass]="{
            'is-valid':!registerForm.get('name')?.errors && registerForm.get('name')?.touched,
            'is-invalid':registerForm.get('name')?.errors && registerForm.get('name')?.touched
            }" 
            id="name" type="text" class="form-control" placeholder="Name" formControlName="name">
            @if(registerForm.get('name')?.errors && registerForm.get('name')?.touched ){
            <div class="alert alert-danger">
                @if (registerForm.get('name')?.getError('required')) { <p class="m-0">Name is required</p>
                }
                @else if (registerForm.get('name')?.getError('minlength')) {
                <p class="m-0"> Name should be 3 or more characters</p>

                }
                @else if (registerForm.get('name')?.getError('maxlength')) {
                <p class="m-0"> Name should be less than or equal 20 characters</p>

                }

            </div>
            }
        </div>
        <div class="my-3">
            <label for="email">Email : </label>
            <input [ngClass]="{
            'is-valid':!registerForm.get('email')?.errors && registerForm.get('email')?.touched,
            'is-invalid':registerForm.get('email')?.errors && registerForm.get('email')?.touched
            }" id="email" type="email" class="form-control" placeholder="Email" formControlName="email">
            @if(registerForm.get('email')?.errors && registerForm.get('email')?.touched ){
            <div class="alert alert-danger">
                @if (registerForm.get('email')?.getError('required')) { <p class="m-0">Email is required</p>
                }
                @else if (registerForm.get('email')?.getError('email')) {
                <p class="m-0"> Enter a valid email</p>

                }

            </div>
            }
        </div>
        <div class="my-3">
            <label for="password">Password : </label>
            <input [ngClass]="{
            'is-valid':!registerForm.get('password')?.errors && registerForm.get('password')?.touched,
            'is-invalid':registerForm.get('password')?.errors && registerForm.get('password')?.touched
            }" id="password" type="password" class="form-control" placeholder="Password" formControlName="password">
            @if(registerForm.get('password')?.errors && registerForm.get('password')?.touched ){
                <div class="alert alert-danger">
                    @if (registerForm.get('password')?.getError('required')) { <p class="m-0">Password is required</p>
                    }
                    @else if (registerForm.get('password')?.getError('pattern')) {
                    <p class="m-0"> Enter a valid password (min 6 characters)</p>
    
                    }
    
                </div>
                }
        </div>
        <div class="my-3">
            <label for="rePassword">Re-Password : </label>
            <input [ngClass]="{
            'is-valid':!registerForm.get('rePassword')?.errors && registerForm.get('rePassword')?.touched,
            'is-invalid':registerForm.get('rePassword')?.errors && registerForm.get('rePassword')?.touched
            }" id="rePassword" type="password" class="form-control" placeholder="Re-Password"
                formControlName="rePassword">
            @if (registerForm.getError('mismatch') && registerForm.get('rePassword')?.touched) {
                <p class="alert alert-danger">Passwords does not match</p>
            }
                
        </div>
        <div class="my-3">
            <label for="phone">Phone : </label>
            <input [ngClass]="{
            'is-valid':!registerForm.get('phone')?.errors && registerForm.get('phone')?.touched,
            'is-invalid':registerForm.get('phone')?.errors && registerForm.get('phone')?.touched
            }" id="phone" type="tel" class="form-control" placeholder="Phone" formControlName="phone">
            @if(registerForm.get('phone')?.errors && registerForm.get('phone')?.touched ){
                <div class="alert alert-danger">
                    @if (registerForm.get('phone')?.getError('required')) { <p class="m-0">Phone is required</p>
                    }
                    @else if (registerForm.get('phone')?.getError('pattern')) {
                    <p class="m-0"> Enter a valid phone</p>
    
                    }
    
                </div>
                }
        </div>
        <button [disabled]="registerForm.invalid || isLoading"  type="submit" class="btn-main d-block ms-auto" type="submit">
            Register
         @if (isLoading) {
            <span><i class="fas fa-spin fa-spinner"></i></span>
         }
        </button>
        @if (errorMsg) {
            <p class="alert alert-danger">{{errorMsg}}</p>
        }
    </form>

</section>